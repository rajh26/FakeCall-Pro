<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FakeCall Pro - Stable Voice</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.4.7/peerjs.min.js"></script>
    <style>
        body { background: #000; color: white; font-family: -apple-system, sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { background: #1c1c1e; padding: 30px; border-radius: 25px; width: 320px; text-align: center; border: 1px solid #333; box-shadow: 0 10px 30px rgba(0,0,0,0.5); }
        .id-box { background: #2c2c2e; padding: 15px; border-radius: 12px; margin: 15px 0; font-family: monospace; font-size: 18px; color: #0a84ff; border: 1px dashed #0a84ff; }
        input { background: #3a3a3c; border: none; border-radius: 10px; color: white; padding: 12px; width: 90%; margin-bottom: 15px; text-align: center; }
        button { background: #30d158; color: white; border: none; border-radius: 10px; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; transition: 0.3s; }
        button:active { transform: scale(0.98); opacity: 0.8; }
        #status { font-size: 12px; color: #8e8e93; margin-top: 15px; }
    </style>
</head>
<body>

<div class="card">
    <h2 style="color: #0a84ff; margin-bottom: 5px;">Ø§ØªØµØ§Ù„ Ø­Ù‚ÙŠÙ‚ÙŠ</h2>
    <div id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ± Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠ...</div>
    
    <div class="id-box" id="my-id">Ø¬Ø§Ø±ÙŠ Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ø±Ù‚Ù…Ùƒ...</div>
    
    <input type="text" id="friend-id" placeholder="Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ¯ÙŠÙ‚Ùƒ Ù‡Ù†Ø§">
    <button onclick="makeCall()">ğŸ“ Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© Ø§Ù„ØµÙˆØªÙŠØ©</button>
    
    <audio id="remote-audio" autoplay></audio>
</div>

<script>
    // Ø¥Ù†Ø´Ø§Ø¡ Ø§ØªØµØ§Ù„ Ù…Ø¹ Ø³ÙŠØ±ÙØ±Ø§Øª PeerJS Ø§Ù„Ø¹Ø§Ù„Ù…ÙŠØ©
    const peer = new Peer();

    // Ø£ÙˆÙ„ Ù…Ø§ ÙŠÙØªØ­ Ø§Ù„Ø³ÙŠØ±ÙØ± ÙŠØ¹Ø·ÙŠÙƒ Ø§Ù„Ø±Ù‚Ù… ÙÙˆØ±Ø§Ù‹
    peer.on('open', (id) => {
        document.getElementById('my-id').innerText = id;
        document.getElementById('status').innerText = "âœ… Ø§Ù„Ù†Ø¸Ø§Ù… Ø¬Ø§Ù‡Ø² - ØªØ¨Ø§Ø¯Ù„ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ù…Ø¹ ØµØ¯ÙŠÙ‚Ùƒ";
    });

    // Ø§Ø³ØªÙ‚Ø¨Ø§Ù„ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©
    peer.on('call', (call) => {
        const confirmCall = confirm("Ù„Ø¯ÙŠÙƒ Ù…ÙƒØ§Ù„Ù…Ø© ØµÙˆØªÙŠØ© ÙˆØ§Ø±Ø¯Ø©ØŒ Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø±Ø¯ØŸ");
        if (confirmCall) {
            navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
                call.answer(stream);
                call.on('stream', (remoteStream) => {
                    document.getElementById('remote-audio').srcObject = remoteStream;
                    document.getElementById('status').innerText = "ğŸ”µ Ø£Ù†Øª Ø§Ù„Ø¢Ù† ÙÙŠ Ù…ÙƒØ§Ù„Ù…Ø© Ù…Ø¨Ø§Ø´Ø±Ø©!";
                });
            });
        }
    });

    // Ø¨Ø¯Ø¡ Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø©
    function makeCall() {
        const destId = document.getElementById('friend-id').value;
        if (!destId) return alert("Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… ØµØ¯ÙŠÙ‚Ùƒ Ø£ÙˆÙ„Ø§Ù‹");

        document.getElementById('status').innerText = "ğŸš€ Ø¬Ø§Ø±ÙŠ Ø·Ù„Ø¨ Ø§Ù„Ø§ØªØµØ§Ù„...";
        
        navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
            const call = peer.call(destId, stream);
            call.on('stream', (remoteStream) => {
                document.getElementById('remote-audio').srcObject = remoteStream;
                document.getElementById('status').innerText = "ğŸ”µ Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†!";
            });
        }).catch(err => {
            alert("ÙØ´Ù„ Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙŠÙƒØ±ÙˆÙÙˆÙ†! ØªØ£ÙƒØ¯ Ù…Ù† Ø¥Ø¹Ø·Ø§Ø¡ Ø§Ù„ØµÙ„Ø§Ø­ÙŠØ©.");
        });
    }

    // Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Ø§Ù„ØªØ¹Ù„ÙŠÙ‚: Ø¥Ø°Ø§ Ù„Ù… ÙŠØ¸Ù‡Ø± Ø§Ù„Ø±Ù‚Ù… Ø®Ù„Ø§Ù„ 10 Ø«ÙˆØ§Ù†Ù
    setTimeout(() => {
        if(document.getElementById('my-id').innerText.includes("Ø¬Ø§Ø±ÙŠ")) {
            document.getElementById('my-id').innerText = "Ø§Ø¶ØºØ· Ù„ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø³ÙŠØ±ÙØ±";
            document.getElementById('my-id').style.cursor = "pointer";
            document.getElementById('my-id').onclick = () => location.reload();
        }
    }, 10000);
</script>

</body>
</html>
