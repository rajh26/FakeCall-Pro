<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FakeCall Pro - Final</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/peerjs/1.4.7/peerjs.min.js"></script>
    <style>
        body { background: #000; color: white; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        .card { background: #1c1c1e; padding: 30px; border-radius: 20px; width: 300px; text-align: center; border: 1px solid #333; }
        .id-display { background: #2c2c2e; padding: 15px; border-radius: 10px; margin: 15px 0; color: #0a84ff; font-weight: bold; font-size: 20px; border: 1px solid #0a84ff; }
        input { background: #3a3a3c; border: none; border-radius: 8px; color: white; padding: 12px; width: 90%; margin-bottom: 15px; text-align: center; }
        button { background: #30d158; color: white; border: none; border-radius: 10px; padding: 15px; width: 100%; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>
    <div class="card">
        <h2 style="color: #0a84ff;">Ø±Ù‚Ù… Ø§ØªØµØ§Ù„Ùƒ Ø§Ù„Ø®Ø§Øµ:</h2>
        <div class="id-display" id="my-id">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªÙˆÙ„ÙŠØ¯...</div>
        <input type="text" id="peer-id" placeholder="Ø¶Ø¹ Ø±Ù‚Ù… ØµØ¯ÙŠÙ‚Ùƒ Ù‡Ù†Ø§">
        <button onclick="startCall()">ðŸ“ž Ø¨Ø¯Ø¡ Ø§Ù„Ø§ØªØµØ§Ù„ Ø§Ù„ØµÙˆØªÙŠ</button>
        <audio id="remote-audio" autoplay></audio>
        <p id="status" style="font-size: 12px; color: #8e8e93; margin-top: 10px;">Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</p>
    </div>

<script>
    // Ø¥Ù†Ø´Ø§Ø¡ Ø±Ù‚Ù… Ø¹Ø´ÙˆØ§Ø¦ÙŠ ÙÙˆØ±Ø§Ù‹ Ù„Ø¶Ù…Ø§Ù† Ø¹Ø¯Ù… Ø§Ù„ØªØ¹Ù„ÙŠÙ‚
    const randomId = "USER-" + Math.floor(Math.random() * 9999);
    const peer = new Peer(randomId);

    peer.on('open', (id) => {
        document.getElementById('my-id').innerText = id;
        document.getElementById('status').innerText = "âœ… Ù…ØªØµÙ„ Ø¨Ø§Ù„Ø³ÙŠØ±ÙØ±";
    });

    peer.on('call', (call) => {
        navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
            call.answer(stream);
            call.on('stream', (remoteStream) => {
                document.getElementById('remote-audio').srcObject = remoteStream;
                document.getElementById('status').innerText = "ðŸ”µ Ù…ÙƒØ§Ù„Ù…Ø© Ø¬Ø§Ø±ÙŠØ©...";
            });
        });
    });

    function startCall() {
        const friendId = document.getElementById('peer-id').value;
        if(!friendId) return alert("Ø£Ø¯Ø®Ù„ Ø§Ù„Ø±Ù‚Ù… Ø£ÙˆÙ„Ø§Ù‹");
        navigator.mediaDevices.getUserMedia({ audio: true }).then((stream) => {
            const call = peer.call(friendId, stream);
            document.getElementById('status').innerText = "ðŸš€ Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...";
            call.on('stream', (remoteStream) => {
                document.getElementById('remote-audio').srcObject = remoteStream;
                document.getElementById('status').innerText = "ðŸ”µ Ù…ØªØµÙ„ Ø§Ù„Ø¢Ù†!";
            });
        });
    }
</script>
</body>
</html>
