<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Apple Pay Pro - Simulation</title>
    <style>
        body { background: #000; color: white; font-family: -apple-system, sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        
        /* عرض الرصيد العلوي */
        .wallet-header { margin-bottom: 30px; text-align: center; }
        .total-balance { font-size: 40px; font-weight: bold; color: #fff; margin-bottom: 5px; transition: 0.5s; }
        .label { color: #888; font-size: 14px; }

        /* البطاقة */
        .card {
            width: 320px; height: 200px;
            background: linear-gradient(135deg, #1a1a1a 0%, #000 100%);
            border-radius: 18px; padding: 25px; border: 1px solid #333;
            box-shadow: 0 15px 35px rgba(0,0,0,1);
            position: relative; transition: 0.4s; cursor: pointer;
        }
        .card:active { transform: scale(0.96); }
        .apple-pay-logo { width: 50px; filter: invert(1); opacity: 0.9; }
        .chip { width: 45px; height: 35px; background: #c5a059; border-radius: 6px; margin-top: 30px; }
        .card-info { margin-top: 35px; font-family: monospace; font-size: 18px; color: #fff; letter-spacing: 2px; }

        /* زر الدفع */
        .pay-btn {
            background: #fff; color: #000; border: none; padding: 18px 100px;
            border-radius: 14px; font-size: 18px; font-weight: bold;
            margin-top: 40px; cursor: pointer; transition: 0.3s;
        }
        .pay-btn:active { background: #ccc; }

        #status { margin-top: 20px; color: #0a84ff; font-weight: 500; height: 20px; }
    </style>
</head>
<body>

    <div class="wallet-header">
        <div class="label">إجمالي الرصيد المتاح</div>
        <div class="total-balance" id="balance">5,420.50</div>
        <div class="label">ريال سعودي</div>
    </div>

    <div class="card" onclick="processPayment()">
        <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" class="apple-pay-logo">
        <div class="chip"></div>
        <div class="card-info">•••• •••• •••• 8826</div>
        <div style="font-size: 10px; color: #666; margin-top: 5px;">RAJH PREMIUM</div>
    </div>

    <button class="pay-btn" onclick="processPayment()">Pay with Apple Pay</button>

    <div id="status">انقر للدفع</div>

    <audio id="paySound" src="https://www.soundjay.com/buttons/sounds/button-37a.mp3"></audio>

    <script>
        let currentBalance = 5420.50;

        function processPayment() {
            const status = document.getElementById('status');
            const balanceEl = document.getElementById('balance');
            const sound = document.getElementById('paySound');

            // 1. محاكاة FaceID
            status.innerText = "جاري التحقق عبر FaceID...";
            status.style.color = "#0a84ff";

            setTimeout(() => {
                // 2. تشغيل صوت الرنين
                sound.play();

                // 3. تحديث الرصيد (خصم مبلغ عشوائي مثلاً 150 ريال)
                const spent = 150.00;
                currentBalance -= spent;
                balanceEl.innerText = currentBalance.toLocaleString(undefined, {minimumFractionDigits: 2});
                balanceEl.style.color = "#ff453a"; // يتحول للأحمر لحظة الخصم

                setTimeout(() => balanceEl.style.color = "#fff", 1000);

                // 4. نجاح العملية
                status.innerText = "✅ تمت عملية الدفع بنجاح";
                status.style.color = "#32d74b";

                // اهتزاز الهاتف
                if (navigator.vibrate) navigator.vibrate([100, 50, 100]);

            }, 1500);
        }
    </script>
</body>
</html>
